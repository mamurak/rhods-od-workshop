<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.1 Serving a model :: Object Detection Workshop</title>
    <link rel="canonical" href="https://codrinbucur.github.io/rhods-od-workshop/rhods-od-workshop/2-01-model-api.html">
    <link rel="prev" href="1-04-object-detection.html">
    <link rel="next" href="2-02-deploy-s2i.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/RHDLogo.svg" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://codrinbucur.github.io/rhods-od-workshop">Object Detection Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhods-od-workshop" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">1. Jupyter Notebooks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-01-project-setup.html">1. Settin up your Data Science Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-02-jupyter-env.html">2. The Jupyter Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-03-notebooks.html">3. Using Notebooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-04-object-detection.html">4. Object Detection</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2. Model Serving with OpenShift Data Science</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="2-01-model-api.html">1. Serving a Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-02-deploy-s2i.html">2. Deploy with Source to Image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-03-testing-deployment.html">3. Testing the Deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-04-calling-from-application.html">4. Calling from an Application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">3. Running Offline Object Detection</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3-01-running-the-model-offline.html">1. Running the Model Offline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3-02-offline-scoring-pipelines.html">2. Offline Scoring Pipelines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">4. Fine Tuning and Training a Model</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="4-01-training-the-model.html">1. Training a Model</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Object Detection Workshop</a></li>
    <li>2. Model Serving with OpenShift Data Science</li>
    <li><a href="2-01-model-api.html">1. Serving a Model</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/codrinbucur/rhods-od-workshop/edit/master/docs/modules/ROOT/pages/2-01-model-api.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">2.1 Serving a model</h1>
<div class="paragraph">
<p>In the previous section, we learned how to create the code that will use an existing object detection model to identify object in a static image. But of course we cannot use a notebook directly like this in a production environment.</p>
</div>
<div class="paragraph">
<p>So now we will learn how to service this model as an <strong>API</strong> that you can directly query from other applications. For this, we will use the model serving capabilities of RHODS:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Return to the RHODS Dashboard and enter your project. Let&#8217;s now take a look at the model server that was already provisioned and configured for your convenience. Let&#8217;s take a look at its configuration.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/notebooks/model_serving.png" alt="Models and model servers">
</div>
</div>
<div class="paragraph">
<p>Under <strong>Models and model servers</strong>, find <em>OVMS</em> and select <code>Edit model server</code> under the <strong>vertical ellipsis</strong>, <strong>â‹®</strong>. In the configuration page, you can review the typical fields for a model server. When done hit <code>Cancel</code> or simply close the window.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You&#8217;re now ready to deploy the object detection model. Under the <em>OVMS</em> model server select <strong>Deploy model</strong> and set it up as follows:</p>
<div class="ulist">
<ul>
<li>
<p>Choose an arbitrary <strong>Model Name</strong> such as <code>model</code>.</p>
</li>
<li>
<p>Under <strong>Model framework</strong> select <code>onnx-1</code>.</p>
</li>
<li>
<p>Under <strong>Model location</strong>, <strong>Existing data connection</strong> select the <em>object-detection</em> data connection that was provisioned earlier for you. As you have seen in sections 1.1 and 1.2, this data connection points to your user S3 bucket where the model and other data reside.</p>
</li>
<li>
<p>Under <strong>Path</strong> enter <code>yolov5m.onnx</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Select <strong>Deploy</strong> to deploy and start serving your object detection model on the model server. Click on <code>1</code> below <em>Deployed models</em> to monitor the status of the model deployment. It will indicate a green status once the model can be consumed. Copy the <em>Inference endpoint</em> so we can test the model deployment.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/notebooks/testing_model_deployment.png" alt="Testing the Model Deployment">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In your workbench, open the <code>2_online-scoring</code> notebook. Insert the inference endpoint into the <code>prediction_url</code> placeholder and execute the notebook. You should see bounding boxes of the objects that the deployed model detected based on the image that it received.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You just deployed your first model with RHODS model serving. Let&#8217;s now <a href="2-02-deploy-s2i.html" class="xref page">deploy a small application that consumer the model</a>.</p>
</div>
<nav class="pagination">
  <span class="prev"><a href="1-04-object-detection.html">4. Object Detection</a></span>
  <span class="next"><a href="2-02-deploy-s2i.html">2. Deploy with Source to Image</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
