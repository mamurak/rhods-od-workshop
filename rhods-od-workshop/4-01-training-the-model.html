<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4.1 Fine Tuning and Training a Model :: Object Detection Workshop</title>
    <link rel="canonical" href="https://codrinbucur.github.io/rhods-od-workshop/rhods-od-workshop/4-01-training-the-model.html">
    <link rel="prev" href="3-02-offline-scoring-pipelines.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/RHDLogo.svg" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://codrinbucur.github.io/rhods-od-workshop">Object Detection Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhods-od-workshop" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">1. Jupyter Notebooks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-01-project-setup.html">1. Settin up your Data Science Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-02-jupyter-env.html">2. The Jupyter Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-03-notebooks.html">3. Using Notebooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-04-object-detection.html">4. Object Detection</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2. Model Serving with OpenShift Data Science</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-01-model-api.html">1. Serving a Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-02-deploy-s2i.html">2. Deploy with Source to Image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-03-testing-deployment.html">3. Testing the Deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-04-calling-from-application.html">4. Calling from an Application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">3. Running Offline Object Detection</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3-01-running-the-model-offline.html">1. Running the Model Offline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3-02-offline-scoring-pipelines.html">2. Offline Scoring Pipelines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">4. Fine Tuning and Training a Model</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="4-01-training-the-model.html">1. Training a Model</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Object Detection Workshop</a></li>
    <li>4. Fine Tuning and Training a Model</li>
    <li><a href="4-01-training-the-model.html">1. Training a Model</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/codrinbucur/rhods-od-workshop/edit/master/docs/modules/ROOT/pages/4-01-training-the-model.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">4.1 Fine Tuning and Training a Model</h1>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is a new and advanced section of the workshop.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now it is time to fine tune and train a model using RHODS and Data Science Pipelines.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Jupyter, go to the <strong>model-training</strong> folder</p>
</li>
<li>
<p>Run the <strong>model-training.pipeline</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on the resources available, this may take some time.</p>
</div>
<div class="paragraph">
<p>The training pipeline will upload the refined model in your bucket.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
With the current workshop implementation, only one training pipeline can run for each user at the same time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To test the updated model, go back to <code>2_online_scoring.ipynb</code> notebook.
Make sure you use the specific <code>class_labels = ['Laptop', 'Computer keyboard', 'Table']</code></p>
</div>
<div class="paragraph">
<p>In order to used the new model in the applications deployed before, you need to the reconfigure the service app created in section 2.2. You can try the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Following the guidelines from section 2.1 Serving a model, deploy the new model under <strong>Models and model servers</strong></p>
</li>
<li>
<p>Copy the Inference endpoint of the new model</p>
</li>
<li>
<p>Using the <strong>OpenShift Console</strong>, go to the service application created in section 2.2 and update the PREDICTION_URL environmental variable to the new model&#8217;s inference endpoint (effectively switching models)</p>
</li>
<li>
<p>In addition, while in the <strong>OpenShift Console</strong> create a ConfigMap containing the class labels 'Laptop', 'Computer keyboard', 'Table'</p>
</li>
<li>
<p>In the same service application, add also the CLASS_LABELS environmental variable pointing to the created ConfigMap</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once both environmental variables have been updated/added, the application will be redeployed. Like in section 2.2, you will see that a build is going on from the build icon:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/s2i/topology.png" alt="alt text" width="400">
</div>
</div>
<div class="paragraph">
<p>Once the service has been redeployed and started exposing the new model predictions as REST APIs, you can test the changes brought by the new model using the NodeJS app deployed in section 2.4 (which consumes the REST APIs) and makes use of the camera / your mobile device.</p>
</div>
<nav class="pagination">
  <span class="prev"><a href="3-02-offline-scoring-pipelines.html">2. Offline Scoring Pipelines</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
